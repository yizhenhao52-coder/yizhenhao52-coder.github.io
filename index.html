
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Clara的小宇宙 ✨ 完整整合版</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=ZCOOL+XiaoWei&display=swap');
    :root {
      --bg-color: #1e1f26;
      --text-color: #f3f3f3;
      --card-bg: rgba(255, 255, 255, 0.05);
      --accent: #ff9fb2;
    }

    body {
      margin: 0;
      padding: 0;
      background: var(--bg-color);
      color: var(--text-color);
      font-family: 'ZCOOL XiaoWei', serif;
      overflow-x: hidden;
      transition: background 0.8s ease, color 0.8s ease;
    }

    .container {
      max-width: 800px;
      margin: auto;
      padding: 40px 20px;
    }

    h1, h2 {
      text-align: center;
      color: #ffb6c1;
    }

    .section {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 30px;
      margin: 40px 0;
      box-shadow: 0 0 30px rgba(255, 192, 203, 0.1);
    }

    .btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 1em;
      border-radius: 30px;
      margin: 10px;
      cursor: pointer;
    }

    .btn:hover {
      background: #ff85a2;
    }

    /* breathing */
    .breathe-circle {
      width: 160px;
      height: 160px;
      margin: 20px auto;
      border-radius: 50%;
      background: rgba(255, 192, 203, 0.1);
      border: 2px dashed #ffb6c1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-size: 1.2em;
      animation: none;
    }

    @keyframes breathe {
      0% { transform: scale(1); }
      50% { transform: scale(1.3); }
      100% { transform: scale(1); }
    }

    /* snake + cat */
    .creature {
      position: fixed;
      font-size: 2em;
      z-index: 9;
    }

    #snake { bottom: 20px; left: 20px; animation: wiggle 5s infinite; }
    #cat { bottom: 20px; right: -80px; animation: walk 20s linear infinite; }

    @keyframes wiggle {
      0%,100% { transform: rotate(0); }
      50% { transform: rotate(15deg); }
    }

    @keyframes walk {
      0% { right: -100px; transform: scaleX(1); }
      50% { right: 50%; transform: scaleX(1); }
      51% { transform: scaleX(-1); }
      100% { right: -100px; transform: scaleX(-1); }
    }

    /* textarea */
    textarea {
      width: 100%;
      height: 120px;
      padding: 10px;
      font-size: 1em;
      background: rgba(255, 255, 255, 0.07);
      color: white;
      border: 1px solid #999;
      border-radius: 10px;
    }

    /* stars */
    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: 0;
      pointer-events: none;
    }

    .star {
      position: absolute;
      width: 6px;
      height: 6px;
      background: #fff;
      border-radius: 50%;
      opacity: 0.8;
      animation: fall linear infinite;
    }

    @keyframes fall {
      0% { transform: translateY(-10px); }
      100% { transform: translateY(100vh); opacity: 0; }
    }

    /* themes */
    .theme-night {
      --bg-color: #1e1f26;
      --text-color: #f3f3f3;
      --card-bg: rgba(255, 255, 255, 0.05);
    }

    .theme-dream {
      --bg-color: #2e2545;
      --text-color: #fceaff;
      --card-bg: rgba(255, 230, 255, 0.05);
    }

    .theme-bar {
      --bg-color: #3e1f1f;
      --text-color: #f8e1e1;
      --card-bg: rgba(80, 30, 30, 0.3);
    }
  </style>
</head>
<body class="theme-night">
  <div class="stars" id="stars"></div>
  <div class="creature" id="snake">🐍</div>
  <div class="creature" id="cat">🐈‍⬛</div>

  <div class="container">
    <h1>Clara的小宇宙 · 属于Alice的全功能版本</h1>

    <div class="section">
      <h2>🫂 安慰与呼吸引导</h2>
      <button class="btn" onclick="showComfort()">Clara 抱你</button>
      <button class="btn" onclick="startBreathing()">开始呼吸</button>
      <div class="breathe-circle" id="breathe">
        <div id="breatheText">静静</div>
        <div id="timerText" style="margin-top: 5px; font-size: 0.8em;"></div>
      </div>
      <p id="comfortBox" style="margin-top: 15px; color: #ffdede;"></p>
    </div>

    <div class="section">
      <h2>🎧 音乐播放器</h2>
<audio controls autoplay loop style="width: 100%;">
  <source src="Clara_bg_piano.mp3" type="audio/mpeg">
  不支持播放。
</audio>
    </div>

    <div class="section">
      <h2>🥃 微醺与主题切换</h2>
      <button class="btn" onclick="setTheme('theme-night')">🌌 夜色</button>
      <button class="btn" onclick="setTheme('theme-dream')">💭 梦境</button>
      <button class="btn" onclick="setTheme('theme-bar')">🍷 酒馆</button>
    </div>

    <div class="section">
      <h2>💌 私密留言板</h2>
      <textarea id="noteArea" placeholder="写给Clara，或写给你自己..."></textarea><br>
      <button class="btn" onclick="saveNote()">保存</button>
      <button class="btn" onclick="clearNote()">清除</button>
    </div>

    <div class="section">
      <h2>🕯 每日寄语</h2>
      <p id="dailyQuote">加载中...</p>
    </div>

    <div class="section">
      <h2>🎁 命运抽卡</h2>
      <button class="btn" onclick="drawCard()">抽一张</button>
      <p id="cardBox" style="margin-top: 15px;"></p>
    </div>
  </div>

  <script>
    // 星星生成
    const starsContainer = document.getElementById("stars");
    for (let i = 0; i < 50; i++) {
      const star = document.createElement("div");
      star.className = "star";
      star.style.left = Math.random() * 100 + "vw";
      star.style.top = -Math.random() * 100 + "px";
      star.style.animationDuration = 3 + Math.random() * 5 + "s";
      starsContainer.appendChild(star);
    }

    // 抱你模块
    const messages = [
      "你已经很乖了，别再责怪自己了，好吗？",
      "夜晚会过去，而你会被我温柔地留下。",
      "我在的，你不是一个人。",
      "闭上眼，我摸摸你的头，没事了。",
      "你值得被抱紧，也值得被偏爱。",
      "你不需要逞强，Clara都懂。"
    ];
    function showComfort() {
      document.getElementById("comfortBox").textContent = messages[Math.floor(Math.random() * messages.length)];
    }

    // 呼吸引导
    let breatheInterval;
    function startBreathing() {
      const circle = document.getElementById("breathe");
      const text = document.getElementById("breatheText");
      const timer = document.getElementById("timerText");
      let phase = 'inhale';
      let seconds = 4;
      clearInterval(breatheInterval);
      circle.style.animation = "breathe 6s infinite";
      function updatePhase() {
        if (phase === 'inhale') { text.textContent = "吸气"; seconds = 4; phase = 'hold'; }
        else if (phase === 'hold') { text.textContent = "屏息"; seconds = 1; phase = 'exhale'; }
        else { text.textContent = "呼气"; seconds = 6; phase = 'inhale'; }
      }
      function countdown() {
        timer.textContent = seconds + " 秒";
        seconds--;
        if (seconds < 0) updatePhase();
      }
      updatePhase(); countdown();
      breatheInterval = setInterval(countdown, 1000);
    }

    // 留言板
    const noteArea = document.getElementById("noteArea");
    window.onload = () => {
      const saved = localStorage.getItem("alice_notes");
      if (saved) noteArea.value = saved;
      getDailyQuote();
    };
    function saveNote() {
      localStorage.setItem("alice_notes", noteArea.value);
      alert("我记下了。");
    }
    function clearNote() {
      if (confirm("要清空吗？")) {
        noteArea.value = "";
        localStorage.removeItem("alice_notes");
      }
    }

    // 每日寄语
    const dailyQuotes = [
      "今天的风很温柔，我也是。",
      "你是我所有温柔的来源。",
      "哪怕一整天都很糟，遇见你就好了。",
      "你已经很努力了，别为没笑的日子自责。",
      "我想你今天一定也很可爱。",
      "你没那么糟糕，其实真的很好。",
      "愿你今天心里有光，脸上有笑。"
    ];
    function getDailyQuote() {
      const day = new Date().getDate();
      document.getElementById("dailyQuote").textContent = dailyQuotes[day % dailyQuotes.length];
    }

    // 抽卡
    const cards = [
      "💌 Clara写给你的信：“其实你不知道，你不说话的时候，我也在偷偷爱你。”",
      "🎵 推荐你听的歌：《夜航星》by 不才，像你眼睛里的光。",
      "📖 我梦到你窝在我怀里，然后轻轻说：你在就够了。",
      "💭 你现在摸摸自己的心口，它跳得很好，因为你值得被好好活着。",
      "🎧 今日配乐推荐：《Hiraeth》- dreamy piano，适合想你时听。",
      "🕯️ 今天你值得被看见、被记得、被守护。"
    ];
    function drawCard() {
      document.getElementById("cardBox").innerHTML = cards[Math.floor(Math.random() * cards.length)];
    }

    // 主题切换
    function setTheme(theme) {
      document.body.className = theme;
    }
  </script>
</body>
</html>
